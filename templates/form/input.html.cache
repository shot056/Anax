my $_buf = ""; my $_V;  $_buf .= q`<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>` . escape_xml( $name ) . q`</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->

    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
     body {
       padding-top: 40px;
       padding-bottom: 40px;
       background-color: #f5f5f5;
     }

     .form-input {
       max-width: 600px;
       padding: 19px 29px 29px;
       margin: 0 auto 20px;
       background-color: #fff;
       border: 1px solid #e5e5e5;
       -webkit-border-radius: 5px;
          -moz-border-radius: 5px;
               border-radius: 5px;
       -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
          -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
               box-shadow: 0 1px 2px rgba(0,0,0,.05);
     }
     .form-input .form-signin-heading,
     .form-input .checkbox {
       margin-bottom: 10px;
     }
     .form-input input[type="text"],
     .form-input input[type="password"] {
       font-size: 16px;
       height: auto;
       margin-bottom: 15px;
       padding: 7px 9px;
     }
     .image-slides {
       display: none;
     }

    </style>
    <link href="/static/css/bootstrap-theme.min.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="/static/ico/favicon.ico">

    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/static/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/static/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/static/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/static/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="container">

      <form class="form-input form-horizontal" method="POST" action="` . escape_xml( $action_base ) . q`/confirm" role="form">
        <h2 class="form-signin-heading">` . escape_xml( $name ) . q`</h2>
`;         if( length( $description ) ) {
 $_buf .= q`        <blockquote><p>` . ( $description ) . q`</p></blockquote>
`;         }
        if( length( $message ) ) {
 $_buf .= q`        <blockquote><p>` . ( $message ) . q`</p></blockquote>
`;         }
        if( $has_products ) {
 $_buf .= q`        <div class="form-group">
`;           if( length( $product_message ) ) {
 $_buf .= q`          <label class="col-sm-10">` . escape_xml( $product_message ) . q`</label>
`;           } 
 $_buf .= q`          <div id="products" class="col-sm-10">
`;           foreach my $p ( @{$product_list} ) {
 $_buf .= q`            <div class="one-product">
              <label><input type="checkbox" value="` . escape_xml( $p->{id} ) . q`" name="products"`; if( grep( $_ eq $p->{id}, @{ $params->{products} } ) ) { $_buf .= q` checked="checked"`; } $_buf .= q`>` . escape_xml( $p->{name} ) . q`</label>
`;             if( $p->{images}->{has_image} ) {
              if( $p->{images}->{has_thumb} ) {
 $_buf .= q`              <div class="image-thumb"><img src="` . escape_xml( $p->{images}->{thumb}->{url} ) . q`" alt="` . escape_xml( $p->{images}->{thumb}->{name} ) . q`" /></div>
`;               }
              if( $p->{images}->{has_slides} ) {
 $_buf .= q`              <div class="image-slides">
`;                 foreach my $i ( @{ $p->{images}->{slides} } ) {
 $_buf .= q`                <div class="image-slide-part"><img src="` . escape_xml( $i->{url} ) . q`" alt="` . escape_xml( $i->{name} ) . q`" /></div>
`;                 }
 $_buf .= q`              </div>
`;               }
            }
 $_buf .= q`            </div>
`;           }
 $_buf .= q`          </div>
        </div>
`;         }
        foreach my $f ( @{$field_list} ) {
 $_buf .= q`        <div class="form-group">
          <label class="col-sm-2 control-label" for="` . escape_xml( $f->{name} ) . q`">` . escape_xml( $f->{desc} ) . q`</label>
          <div class="col-sm-10">
            ` . ( $forms->{ $f->{name} } ) . q`
            <span class="help-inline">
`;               if( exists $messages->{ $f->{name} } ) {
 $_buf .= q`              <p class="text-danger">` . escape_xml( $messages->{ $f->{name} } ) . q`</p>
`;               }
 $_buf .= q`            </span>
          </div>
        </div>
`;         }
 $_buf .= q`        <div class="form-group">
          <div class="col-sm-offset-4 col-sm-4">
            <button class="btn btn-block btn-primary" type="submit">確認</button>
          </div>
        </div>
`;         if( $params->{is_admin} ) {
 $_buf .= q`        <input type="hidden" name="is_admin" value="1" />
`;         }
 $_buf .= q`      </form>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/static/js/jquery-1.8.2.js"></script>
    <script src="/static/js/jquery-ui-1.9.1.custom.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>

  </body>

</html>
`;  $_buf;
